@- PAYMENT

@- success
@- rule no.1

-------------------- rule

POST /payment

~ headers
example: ranges_payment_with_reversal

~ body
{{ jpath: $.amount }} >> {{ range: payment.amount/success }}

----- response

~ body
{
    @- reversal по этому id вернет success
    "id": {{ range: payment.id/default }}, 
    "status": "success"
}


@- success with pending reversal
@- rule no.2

-------------------- rule

POST /payment

~ headers
example: ranges_payment_with_reversal

~ body
{{ jpath: $.amount }} >> {{ range: payment.amount/success.reversal.pending }}

----- response

~ body
{
    @- reversal по этому id вернет pending
    "id": {{ range: payment.id/reversal.pending }}, 
    "status": "success"
}


@- success with reject reversal
@- rule no.3

-------------------- rule

POST /payment

~ headers
example: ranges_payment_with_reversal

~ body
{{ jpath: $.amount }} >> {{ range: payment.amount/success.reversal.reject }}

----- response

~ body
{
    @- reversal по этому id вернет reject
    "id": {{ range: payment.id/reversal.pending  }}, 
    "status": "success"
}


@- pending
@- rule no.4

-------------------- rule

POST /payment

~ headers
example: ranges_payment_with_reversal

~ body
{{ jpath: $.amount }} >> {{ range: payment.amount/pending }}

----- response

~ body
{
    @- reversal по этому id вернет success
    "id": {{ range: payment.id/default }}, 
    "status": "pending"
}


@- reject
@- rule no.5

-------------------- rule

POST /payment

~ headers
example: ranges_payment_with_reversal

~ body
{{ jpath: $.amount }} >> {{ range: payment.amount/pending }}

----- response

~ body
{
    @- reversal по этому id вернет success
    "id": {{ range: payment.id/default }}, 
    "status": "reject"
}

@- REVERSAL

@- success
@- rule no.6

-------------------- rule

POST /payment/reversal/{{ range: payment.id/default }}

~ headers
example: ranges_payment_with_reversal

----- response

~ body
{
    "status": "success"
}

@- pending
@- rule no.7

-------------------- rule

POST /payment/reversal/{{ range: payment.id/reversal.pending }}

~ headers
example: ranges_payment_with_reversal

----- response

~ body
{
    "status": "pending"
}

@- reject
@- rule no.8

-------------------- rule

POST /payment/reversal/{{ range: payment.id/reversal.reject }}

~ headers
example: ranges_payment_with_reversal

----- response

~ body
{
    "status": "reject"
}